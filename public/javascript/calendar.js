document.addEventListener('DOMContentLoaded', function(event) {
  console.log("It's Alive")
  M.AutoInit();

  let eventsArr = [{
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'The The',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }, {
    date: '12/18/18',
    dayOfWeek: 'Sat',
    headliner: 'Bandz',
    venue: 'Red Rocks'
  }]

  // Creating Table/ Blocks
  const body = document.querySelector('body')
  const calendar = document.querySelector('.calendar-section')
  const events = document.querySelector('#events-row')


  const createRows = () => {
    eventsArr.forEach(event => {
      let dateDiv = document.createElement('div')
      let dayDiv = document.createElement('div')
      let headlineDiv = document.createElement('div')
      let venueDiv = document.createElement('div')
      let buttonDiv = document.createElement('div')
      let button = document.createElement('a')

      dateDiv.setAttribute('class', 'col l2 s2 row-element valign-wrapper date-div')
      dayDiv.setAttribute('class', 'col l2 s2 row-element valign-wrapper')
      headlineDiv.setAttribute('class', 'col l3 s3 row-element valign-wrapper')
      venueDiv.setAttribute('class', 'col l3 s3 row-element valign-wrapper')
      buttonDiv.setAttribute('class', 'col l2 s2 row-element valign-wrapper row-element-last')
      button.setAttribute('class', 'waves-effect waves-light btn event-btn z-depth-0 center valign-wrapper modal-trigger')
      button.setAttribute('data-target', 'modal3')
      button.setAttribute('id', 'event-button')


      dateDiv.innerText = `${event.date}`
      dayDiv.innerText = `${event.dayOfWeek}`
      headlineDiv.innerText = `${event.headliner}`
      venueDiv.innerText = `${event.venue}`
      button.innerText = 'Book'
      button.value = {
        date: `${event.date}`,
        day: `${event.dayOfWeek}`,
        headliner: `${event.headliner}`,
        venue: `${event.venue}`
      }


      events.appendChild(dateDiv)
      events.appendChild(dayDiv)
      events.appendChild(headlineDiv)
      events.appendChild(venueDiv)
      events.appendChild(buttonDiv)
      buttonDiv.appendChild(button)
    })

  }

  createRows()

  // Book Function
  const bookModal = document.querySelector('#modal3-content')

  // Location TEST ARRAY //
  const pickupArr = [{
    service: "BTS: Boulder",
    time: '5:30pm',
    location: 'UNIV. HILL CHEBA HUT',
    headliner: 'BOOMBOX',
    venue: 'THE FILLMORE',
    roundTrip: true,
    price: "$25.00",
    saleEnd: "December 31",
    fee: "$2.23"
  }, {
    service: "BTS: Boulder",
    time: '5:30pm',
    location: 'UNIV. HILL CHEBA HUT',
    headliner: 'BOOMBOX',
    venue: 'THE FILLMORE',
    roundTrip: true,
    price: "$25.00",
    saleEnd: "December 31",
    fee: "$2.23"
  }, {
    service: "BTS: Boulder",
    time: '5:30pm',
    location: 'UNIV. HILL CHEBA HUT',
    headliner: 'BOOMBOX',
    venue: 'THE FILLMORE',
    roundTrip: false,
    price: "$25.00",
    saleEnd: "December 31",
    fee: "$2.23"
  }]


  calendar.addEventListener('click', (event) => {

    while (bookModal.hasChildNodes()) {
      bookModal.removeChild(bookModal.lastChild);
    }

    let eventInfo = event.target.value
    let headliner = eventInfo.headliner
    let date = eventInfo.date
    let venue = eventInfo.venue
    let day = eventInfo.day
    let modalTitle = document.createElement('h5')

    modalTitle.innerText = `${headliner} - ${day} (${date}) at ${venue}`

    bookModal.appendChild(modalTitle)

    // USE WITH Location TEST ARRAY //
    pickupArr.forEach(option => {
      let service = option.service
      let time = option.time
      let location = option.location
      let headliner = option.headliner
      let venue = option.venue
      let price = option.price
      let saleEnd = option.saleEnd
      let roundTrip = option.rountTrip
      let fee = option.fee
      let rTrip

      option.roundTrip ? rTrip = '(and back)' : rTrip = ''



      let row = document.createElement('div')
      let pickupOption = document.createElement('div')
      let quantityField = document.createElement('div')
      let quantitySelect = document.createElement('input')
      let option1 = document.createElement('option')


      row.setAttribute('class', 'row')
      pickupOption.setAttribute('class', 'pickupOpt col s10 l11 float-left')
      quantityField.setAttribute('class', 'col s2 l1 float-left validate')
      quantitySelect.setAttribute('class', 'validate ticket-quantity')
      quantitySelect.setAttribute('type', 'number')


      pickupOption.innerText = `${service} | ${time} ${location} to ${headliner} at ${venue} ${rTrip} \n ${price} + ${fee} FEE \n ${saleEnd}`


      modalTitle.appendChild(row)
      row.appendChild(pickupOption)
      row.appendChild(quantityField)
      quantityField.appendChild(quantitySelect)
      quantitySelect.appendChild(option1)



    })



  })






  // Book Button
  const bookBtn = document.querySelector('.book-btn')

  bookBtn.addEventListener('click', (event) => {
    const ticketQuantity = document.querySelector('.ticket-quantity')
    console.log(ticketQuantity.value)
    bookBtn.setAttribute('class', 'modal-close')
  })

  // Sort (Stretch)




}) // DOMContentLoaded;
